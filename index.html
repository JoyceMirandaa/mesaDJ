<!DOCTYPE html>
<html lang="pt-BR">
<link rel="stylesheet" href="style.css">
<head>
  <meta charset="UTF-8">
  <title>Controle do LED e Ultrassom</title>
</head>
<body>

  <h1>Mesa DJ IOT</h1>

  <button id="botao-kick" class=kick onclick="mudarEstado()">kick</button>
  <button id="botao-snare" class=snare onclick="mudarEstado()">snare</button>
  <button id="botao-hihat" class=hihat onclick="mudarEstado()">snare</button>

  <script>
    let estado = 0; // 0 = desligado, 1 = ligado
    let valor = 0;  // dist√¢ncia

    async function mudarEstado() {
      estado = estado === 0 ? 1 : 0;
      enviarDados();
    }

    async function enviarDados() {
      const botao = document.getElementById('botao-kick');
      botao.disabled = true;

      try {
        const resposta = await fetch(`iot.php?estado=${estado}&valor=${valor}`);
        const texto = await resposta.text();
        console.log(texto);
        
      } catch (erro) {
        console.error('Erro:', erro);
      }

      botao.disabled = false;
    }
  </script>

</body>
</html>
